package br.com.restaurante.faces;import java.util.List;import javax.annotation.PostConstruct;import javax.ejb.EJB;import javax.faces.bean.ManagedBean;import javax.faces.bean.ViewScoped;import javax.faces.model.SelectItem;import br.com.restaurante.business.AtendimentoBS;import br.com.restaurante.business.ComboBS;import br.com.restaurante.business.FuncionarioBS;import br.com.restaurante.business.UsuarioBS;import br.com.restaurante.model.AtendimentoModel;import br.com.restaurante.model.MenuModel;import br.com.restaurante.model.UsuarioModel;import br.com.restaurante.util.Constantes;import br.com.restaurante.util.Utilitario;import br.com.topsys.util.TSUtil;import br.com.topsys.web.faces.TSMainFaces;import br.com.topsys.web.util.TSFacesUtil;@SuppressWarnings("serial")@ManagedBean(name = "listaAtendimentoFaces")@ViewScopedpublic final class ListaAtendimentoFaces extends TSMainFaces {	@EJB	private UsuarioBS usuarioBS;		@EJB	private AtendimentoBS atendimentoBS;		@EJB	private FuncionarioBS funcionarioBS;		@EJB	private ComboBS comboBS;	private List<AtendimentoModel> grid;	private List<AtendimentoModel> gridFiltrado;		private AtendimentoModel atendimentoFiltroModel;	private AtendimentoModel atendimentoModel;	private AtendimentoModel atendimentoSelectionModel;	private List<SelectItem> comboCargo;	@Override	@PostConstruct	protected void clearFields() {		this.instanciarFiltro();		this.pesquisarAtendimentos();				this.comboCargo = super.initCombo(this.comboBS.pesquisarCargos(), "id", "descricao");	}	private void instanciarFiltro() {		this.atendimentoFiltroModel = (AtendimentoModel) TSFacesUtil.getObjectInSession(Constantes.SESSION_ATENDIMENTO_FILTRO);		if (TSUtil.isEmpty(this.atendimentoFiltroModel)) {			this.atendimentoFiltroModel = Utilitario.getAtendimentoFiltroSession();			TSFacesUtil.addObjectInSession(Constantes.SESSION_ATENDIMENTO_FILTRO, this.atendimentoFiltroModel);		}	}		public void pesquisarAtendimentos() {		this.grid = this.atendimentoBS.pesquisarAtendimentos(this.atendimentoFiltroModel);	}	@Override	protected String detail() {		if (!TSUtil.isEmpty(this.atendimentoSelectionModel)) {			this.atendimentoModel = this.atendimentoSelectionModel;		}		if (TSUtil.isEmpty(this.atendimentoModel)) {			return null;		}		AtendimentoModel pmm = this.atendimentoBS.obterCrudModel(this.atendimentoModel);		Utilitario.atualizarFuncionarioSessao(this.funcionarioBS.obterCrudModel(pmm.getFuncionarioModel()));		Utilitario.atualizarAtendimentoSessao(pmm);		MenuModel menuModel = new MenuModel();		menuModel.setId(Constantes.MENU_ATENDIMENTO);		MenuFaces mf = (MenuFaces) TSFacesUtil.getManagedBeanInSession(Constantes.MENU_FACES);		return (mf.escolherMenu(menuModel));	}		public List<UsuarioModel> autoCompleteResponsavel(String query){		return this.usuarioBS.autoComplete(query);	}	public AtendimentoModel getAtendimentoFiltroModel() {		return atendimentoFiltroModel;	}	public void setAtendimentoFiltroModel(AtendimentoModel atendimentoFiltroModel) {		this.atendimentoFiltroModel = atendimentoFiltroModel;	}	public List<AtendimentoModel> getGrid() {		return grid;	}	public void setGrid(List<AtendimentoModel> grid) {		this.grid = grid;	}	public List<AtendimentoModel> getGridFiltrado() {		return gridFiltrado;	}	public void setGridFiltrado(List<AtendimentoModel> gridFiltrado) {		this.gridFiltrado = gridFiltrado;	}	public AtendimentoModel getAtendimentoModel() {		return atendimentoModel;	}	public void setAtendimentoModel(AtendimentoModel atendimentoModel) {		this.atendimentoModel = atendimentoModel;	}	public AtendimentoModel getAtendimentoSelectionModel() {		return atendimentoSelectionModel;	}	public void setAtendimentoSelectionModel(AtendimentoModel atendimentoSelectionModel) {		this.atendimentoSelectionModel = atendimentoSelectionModel;	}	public List<SelectItem> getComboCargo() {		return comboCargo;	}	public void setComboCargo(List<SelectItem> comboCargo) {		this.comboCargo = comboCargo;	}}