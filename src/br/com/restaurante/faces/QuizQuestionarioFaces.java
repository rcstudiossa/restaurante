package br.com.restaurante.faces;import java.util.Date;import javax.annotation.PostConstruct;import javax.ejb.EJB;import javax.faces.bean.ManagedBean;import javax.faces.bean.ViewScoped;import br.com.restaurante.business.QuizQuestionarioBS;import br.com.restaurante.business.QuizTemplateBSAb;import br.com.restaurante.model.QuizQuestionarioArquetipoRespostaModel;import br.com.restaurante.model.QuizQuestionarioModel;import br.com.restaurante.model.QuizQuestionarioRespostaModel;import br.com.restaurante.util.Constantes;import br.com.restaurante.util.Utilitario;import br.com.topsys.util.TSUtil;import br.com.topsys.web.util.TSFacesUtil;@ViewScoped@SuppressWarnings("serial")@ManagedBean(name = "quizQuestionarioFaces")public class QuizQuestionarioFaces extends QuizTemplateFacesAb<QuizQuestionarioModel, QuizQuestionarioRespostaModel, QuizQuestionarioArquetipoRespostaModel> {	@EJB	private QuizQuestionarioBS quizQuestionarioBS;		private Long tabPepId;		@PostConstruct	protected void clearFields() {				this.tabPepId = (Long)TSFacesUtil.getObjectInSession(Constantes.SESSION_TAB_ID);				if(!TSUtil.isEmpty(tabPepId)){						super.init();					}			}		@Override	protected String getNomeRelatorio() {		return "quizQuestionario.jasper";	}		@Override	protected void iniciarExtensaoQuestionario(QuizQuestionarioModel questionario) {		questionario.setQuizQuestionarioPaiModel(new QuizQuestionarioModel());	}		@Override	protected void preInsertQuiz() {		super.getQuizQuestionarioModel().setData(new Date());		super.getQuizQuestionarioModel().setDataCadastro(new Date());		super.getQuizQuestionarioModel().setUsuarioCadastroModel(Utilitario.getUsuarioLogado());	}		@Override	protected QuizQuestionarioModel getInstanciaQuiz() {		QuizQuestionarioModel model = new QuizQuestionarioModel();		model.setAtendimentoModel(Utilitario.getAtendimentoSessao());		return model;	}		@Override	protected QuizQuestionarioRespostaModel getInstanciaResposta() {		return new QuizQuestionarioRespostaModel();	}	@Override	protected QuizTemplateBSAb<QuizQuestionarioModel, QuizQuestionarioRespostaModel, QuizQuestionarioArquetipoRespostaModel> getQuizQuestionarioBS() {		return this.quizQuestionarioBS;	}	public boolean isPermissao() {				return !TSUtil.isEmpty(super.getQuizQuestionarioModel().getAtendimentoModel())				&& !TSUtil.isEmpty(super.getQuizQuestionarioModel().getAtendimentoModel().getStatusAtendimentoModel())				&& !TSUtil.isEmpty(super.getQuizQuestionarioModel().getAtendimentoModel().getStatusAtendimentoModel().getFlagFechado())				&& !super.getQuizQuestionarioModel().getAtendimentoModel().getStatusAtendimentoModel().getFlagFechado();	}	@Override	protected Long getGrupoQuizId() {		return this.tabPepId;	}}