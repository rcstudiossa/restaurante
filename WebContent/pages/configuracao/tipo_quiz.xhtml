<ui:composition template="/pages/includes/template_crud.xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui" xmlns:f="http://java.sun.com/jsf/core" xmlns:estag="http://java.sun.com/jsf/composite/components">	<ui:param name="mbean" value="${tipoQuizFaces}" />	<ui:param name="mbeanModel" value="${tipoQuizFaces.crudModel}" />	<ui:param name="mbeanPesquisaModel" value="${tipoQuizFaces.crudPesquisaModel}" />	<ui:param name="possuiDadosAtualizacao" value="true" />	<ui:param name="mbeanPergunta" value="${tipoQuizFaces}" />	<ui:param name="mbeanPerguntaModel" value="${tipoQuizFaces.quizGrupoModel.quizPerguntaModel}" />	<ui:param name="ocultarConfiguracoesExame" value="${true}" />	<ui:define name="cadastro">		<p:fieldset style="width: 100%">			<ui:include src="includes/include_cadastro_tipo_quiz.xhtml">				<ui:param name="disabled" value="${false}" />			</ui:include>		</p:fieldset>		<p:panel header="Estrutura" toggleable="true">			<h:panelGrid id="pgConfiguracoes" style="width: 100%">				<h:panelGrid columns="2" columnClasses="coluna80, coluna20" style="width: 40%; margin-left: -2px">					<h:outputText value="Grupo" />					<h:outputText value="" />					<p:inputText id="grupo" value="#{mbean.quizGrupoModel.descricao}" maxlength="100" onkeypress="return clickClassEnter(event, 'btnAddGrupo')" styleClass="coluna95" />					<p:commandButton id="btnAddGrupo" value="Adicionar" icon="ui-icon-plus" action="#{mbean.inserirGrupo}" process="@this, pgConfiguracoes" update="pgConfiguracoes" styleClass="btnAddGrupo" />				</h:panelGrid>				<ui:repeat id="uiRepeatGrupo" var="quizGrupo" value="#{mbeanModel.grupos}" varStatus="varStatus">					<p:fieldset style="margin-top: 5px">						<f:facet name="legend">							<p:inplace label="#{quizGrupo.id}: #{quizGrupo.descricao} (#{quizGrupo.ordem})">								<p:inputText value="#{quizGrupo.descricao}" maxlength="100" size="50" />								<p:inputText value="#{quizGrupo.ordem}" maxlength="3" size="5" />								<p:commandButton icon="salvar" action="#{tipoQuizFaces.alterarGrupo}" update="@form">									<f:setPropertyActionListener target="#{tipoQuizFaces.quizGrupoModel}" value="#{quizGrupo}" />								</p:commandButton>							</p:inplace>						</f:facet>						<h:panelGrid id="pgPergunta" columns="3" columnClasses="coluna80, coluna10, coluna10" style="width: 60%; margin-left: -2px">							<h:outputText value="Pergunta" />							<h:outputText value="" />							<h:outputText value="" />							<p:autoComplete id="acPergunta" value="#{quizGrupo.quizPerguntaModel}" var="pergunta" queryDelay="500" scrollHeight="200" completeMethod="#{mbean.buscaPergunta}" itemLabel="#{pergunta.pergunta}" itemValue="#{pergunta}" converter="#{quizPerguntaConverter}" minQueryLength="2" effectDuration="0" onkeypress="return clickClassEnter(event, 'btnAddPergunta#{varStatus.index}')" styleClass="autoComplete98">								<p:column headerText="ID" styleClass="coluna1">									<h:outputText value="#{pergunta.id}" />								</p:column>								<p:column headerText="Pergunta" styleClass="coluna40">									<h:outputText value="#{pergunta.pergunta}" />								</p:column>								<p:column headerText="Apelido" styleClass="coluna15">									<h:outputText value="#{pergunta.apelido}" />								</p:column>								<p:column headerText="Tipo de Resposta" styleClass="coluna15">									<h:outputText value="#{pergunta.tipoRespostaModel.descricao}" />								</p:column>								<p:column headerText="Respostas" styleClass="30">									<h:outputText value="#{pergunta.descricaoRespostas}" />								</p:column>								<p:ajax event="query" global="false" />							</p:autoComplete>							<p:commandButton id="btnAddPergunta" value="Adicionar" icon="ui-icon-plus" action="#{mbean.addPergunta(quizGrupo)}" process="@this, acPergunta" update=":tabview:frmTabCadastro:pgConfiguracoes" styleClass="btnAddPergunta#{varStatus.index}" />							<p:commandButton id="btnCriarPergunta" value="Criar Pergunta" icon="ui-icon-plus" action="#{mbean.iniciarPergunta(quizGrupo)}" process="@this" update=":tabview:formPergunta:spDadosPergunta" global="false" oncomplete="PF('dlgPergunta').show();" style="width: 125px" />						</h:panelGrid>						<p:scrollPanel mode="native" style="width: 100%">							<p:dataTable id="gridQuizes" value="#{quizGrupo.quizes}" var="quiz" rowIndexVar="rowIndex" emptyMessage="Nenhuma pergunta cadastrada" style="margin-top: 5px; width: 150%">								<p:column headerText="ID" styleClass="coluna03">									<h:outputText value="#{quiz.id}" />								</p:column>								<p:column headerText="Ordem" styleClass="coluna03">									<p:inputText value="#{quiz.ordem}" maxlength="3" onkeyup="return Mascara(this,Integer);" styleClass="coluna95" />								</p:column>								<p:column headerText="Pergunta" styleClass="coluna20">									<h:outputText value="#{quiz.quizPerguntaModel.id}: #{quiz.quizPerguntaModel.pergunta}" />								</p:column>								<p:column headerText="Apelido" styleClass="coluna25">									<p:inputText value="#{quiz.apelido}" maxlength="200" styleClass="coluna95" />								</p:column>								<p:column headerText="Max" styleClass="coluna5">									<p:inputText value="#{quiz.maxlength}" maxlength="5" styleClass="coluna95" />								</p:column>								<p:column headerText="Rows" styleClass="coluna3">									<p:inputText value="#{quiz.rows}" maxlength="2" styleClass="coluna95" />								</p:column>								<p:column headerText="TF" styleClass="coluna03">									<p:selectBooleanCheckbox title="Tamanho fixo" value="#{quiz.flagTamanhoFixo}" />								</p:column>								<p:column headerText="Col." styleClass="coluna03">									<p:inputText value="#{quiz.qtdColunas}" maxlength="1" styleClass="coluna95" />								</p:column>								<p:column headerText="Div" styleClass="coluna8">									<p:inputText value="#{quiz.cssDiv}" maxlength="100" styleClass="coluna95" />								</p:column>								<p:column headerText="Css Colunas" styleClass="coluna15">									<p:inputText value="#{quiz.cssColunas}" maxlength="100" styleClass="coluna95" />								</p:column>								<p:column headerText="Ajuste" styleClass="coluna5">									<p:inputText value="#{quiz.cssAjuste}" maxlength="30" styleClass="coluna95" />								</p:column>								<p:column headerText="Obr?" styleClass="coluna03">									<p:selectBooleanCheckbox value="#{quiz.flagObrigatorio}" />								</p:column>								<p:column headerText="Ati?" styleClass="coluna03">									<p:selectBooleanCheckbox value="#{quiz.flagAtivo}" />								</p:column>								<p:column headerText="Out?" styleClass="coluna03">									<p:selectBooleanCheckbox value="#{quiz.flagOutros}" />								</p:column>								<p:column headerText="Cop?" styleClass="coluna03">									<p:selectBooleanCheckbox value="#{quiz.flagCopia}" />								</p:column>								<p:column headerText="D" styleClass="coluna03">									<p:commandLink global="false" action="#{mbean.atualizarComboRespostasDependentes}" process="@this" update=":tabview:frmTabCadastro:spRespostaDependente" oncomplete="PF('dlgRespostaDependente').show();">										<h:graphicImage value="../resources/images/D.png" title="Adicionar Dependência" rendered="#{quiz.quizRespostaDependenteModel.id == null and empty quiz.validadores}" />										<h:graphicImage value="../resources/images/D_selecionado.png" title="Visualizar Dependência" rendered="#{quiz.quizRespostaDependenteModel.id != null or !empty quiz.validadores}" />										<f:setPropertyActionListener target="#{mbean.quizSelecionado}" value="#{quiz}" />									</p:commandLink>								</p:column>								<p:column headerText="R" styleClass="coluna03">									<p:commandLink global="false" action="#{mbean.atualizarComboPerguntasPadrao}" process="@this" update=":tabview:frmTabCadastro:spRespostaPadrao" oncomplete="PF('dlgRespostaPadrao').show();">										<h:graphicImage value="../resources/images/R.png" title="Adicionar resposta padrão" rendered="#{quiz.quizRespostaPadraoModel.id == null and empty quiz.queryRespostaPadrao}" />										<h:graphicImage value="../resources/images/R_selecionado.png" title="Visualizar resposta padrão" rendered="#{quiz.quizRespostaPadraoModel.id != null or !empty quiz.queryRespostaPadrao}" />										<f:setPropertyActionListener target="#{mbean.quizSelecionado}" value="#{quiz}" />									</p:commandLink>								</p:column>								<p:column styleClass="coluna03">									<div align="center">										<p:commandLink title="Clique aqui para remover o quiz" action="#{mbean.removePergunta}" process="@this" update="@form" rendered="#{empty quiz.id}">											<h:graphicImage value="../resources/images/delete16.png" style="border: 0px" />											<f:setPropertyActionListener target="#{tipoQuizFaces.quizSelecionado}" value="#{quiz}" />										</p:commandLink>									</div>								</p:column>							</p:dataTable>						</p:scrollPanel>						<div align="right">							<p:commandButton id="btnRemoveGrupo" value="Remover Grupo" icon="ui-icon-close" action="#{mbean.removeGrupo(quizGrupo)}" process="@this, :tabview:frmTabCadastro:pgConfiguracoes" update="@form" rendered="#{quizGrupo.permissaoExcluir}" style="margin-top:10px" />						</div>					</p:fieldset>				</ui:repeat>			</h:panelGrid>		</p:panel>		<p:dialog id="dialogRespostaDependente" header="Configurações de Dependência" widgetVar="dlgRespostaDependente" modal="true" closeOnEscape="true" styleClass="dialog60">			<p:scrollPanel id="spRespostaDependente" mode="native" style="background: none; padding: 5px; margin: 5px;">				<h:panelGrid columns="2" columnClasses="coluna50, coluna50" style="width: 95%">					<h:outputLabel for="comboPerguntaDependente" value="Pergunta" />					<h:outputText value="Resposta" />					<p:selectOneMenu id="comboPerguntaDependente" value="#{mbean.quizSelecionado.quizDependenciaModel.id}" styleClass="coluna90">						<f:selectItem itemLabel="Selecione" itemValue="" />						<f:selectItems value="#{mbean.comboPerguntas}" />						<p:ajax global="false" listener="#{mbean.atualizarComboRespostasDependentes}" process="@this" update="comboRespostaDependente" />					</p:selectOneMenu>					<p:selectOneMenu id="comboRespostaDependente" value="#{mbean.quizSelecionado.quizRespostaDependenteModel.id}" disabled="#{mbean.quizSelecionado.quizDependenciaModel.id == null}" styleClass="coluna90">						<f:selectItem itemLabel="Selecione" itemValue="" />						<f:selectItems value="#{mbean.comboRespostas}" />					</p:selectOneMenu>				</h:panelGrid>				<h:panelGrid columns="2" columnClasses="coluna80, coluna20" style="width: 60%">					<h:outputText value="Validador" />					<h:outputText value="" />					<p:selectOneMenu value="#{mbean.validadorModel.id}" styleClass="coluna90">						<f:selectItem itemLabel="Não Selecionado" itemValue="" />						<f:selectItems value="#{mbean.comboValidadores}" />					</p:selectOneMenu>					<p:commandButton id="btnAddValidador" icon="ui-icon-plus" value="Adicionar" action="#{mbean.addValidador}" update="spRespostaDependente" />				</h:panelGrid>				<h:panelGrid style="width: 100%">					<p:dataTable value="#{mbean.quizSelecionado.validadores}" var="validador" emptyMessage="Nenhum validador adicionador">						<p:column headerText="Validador" styleClass="coluna40">							<h:outputText value="#{validador.validadorModel.descricao}" />						</p:column>						<p:column headerText="Resposta Padrão" styleClass="coluna60">							<p:inputText value="#{validador.respostaPadrao}" maxlength="100" styleClass="coluna98" />						</p:column>						<p:column styleClass="coluna1">							<div align="center">								<p:commandLink title="Clique aqui para remover o validador" action="#{mbean.removeValidador}" process="@this" update=":tabview:frmTabCadastro:spRespostaDependente">									<h:graphicImage value="../resources/images/delete16.png" style="border: 0px" />									<f:setPropertyActionListener target="#{tipoQuizFaces.quizValidadorModel}" value="#{validador}" />								</p:commandLink>							</div>						</p:column>					</p:dataTable>				</h:panelGrid>				<script type="text/javascript">					$(document).ready(function() {						$("div[id*=spRespostaDependente]").height($(window).height() * 0.6 - 120);					});				</script>			</p:scrollPanel>			<p:panel style="margin: 5px;">				<p:commandButton global="false" value="Fechar" icon="ui-icon-close" process="@this, spRespostaDependente" onclick="PF('dlgRespostaDependente').hide()" style="margin-top: 5px;" />			</p:panel>		</p:dialog>				<p:dialog id="dialogRespostaPadrao" header="Resposta Padrão" widgetVar="dlgRespostaPadrao" modal="true" closeOnEscape="true" styleClass="dialog60">			<p:scrollPanel id="spRespostaPadrao" mode="native" style="background: none; padding: 5px; margin: 5px;">				<h:panelGrid columns="2" columnClasses="coluna60, coluna40" style="width: 100%">					<h:outputText value="Tipo de Quiz" />					<h:outputText value="Pergunta" />					<p:selectOneMenu id="comboTipoQuizPadrao" value="#{mbean.quizSelecionado.quizRespostaPadraoModel.tipoQuizModel.id}" style="width:90%">						<f:selectItem itemLabel="Selecione" itemValue="" />						<f:selectItems value="#{mbean.comboTiposQuiz}" />						<p:ajax global="false" listener="#{mbean.atualizarComboPerguntasPadrao}" process="@this" update="comboRespostaPadrao" />					</p:selectOneMenu>					<p:selectOneMenu id="comboRespostaPadrao" value="#{mbean.quizSelecionado.quizRespostaPadraoModel.id}" disabled="#{mbean.quizSelecionado.tipoQuizModel.id == null}" style="width:90%">						<f:selectItem itemLabel="Selecione" itemValue="" />						<f:selectItems value="#{mbean.comboPerguntasOutrosQuestionarios}" />					</p:selectOneMenu>				</h:panelGrid>				<h:panelGrid style="width: 100%">					<h:outputText value="Query da resposta padrão" />					<p:inputTextarea value="#{mbean.quizSelecionado.queryRespostaPadrao}" rows="10" autoResize="false" styleClass="coluna98" />				</h:panelGrid>				<script type="text/javascript">					$(document).ready(function() {						$(document.getElementById("tabview\:frmTabCadastro\:spRespostaPadrao")).height($(window).height() * 0.6 - 120);					});				</script>			</p:scrollPanel>			<p:panel style="margin: 5px;">				<p:commandButton global="false" value="Fechar" icon="ui-icon-close" process="@this, spRespostaPadrao" update=":tabview:frmTabCadastro:pgConfiguracoes" onclick="PF('dlgRespostaPadrao').hide()" style="margin-top: 5px;" />			</p:panel>		</p:dialog>	</ui:define>		<ui:define name="comandosCrudFim">		<ui:include src="includes/include_historico_tipo_quiz.xhtml" />	</ui:define>	<ui:define name="cadastroSemForm">		<p:dialog id="dialogPergunta" header="Cadastro de Perguntas" modal="true" widgetVar="dlgPergunta" styleClass="dialog80 dialogSemScroll">			<h:form id="formPergunta">				<p:scrollPanel id="spDadosPergunta" mode="native" style="background: none; padding: 5px; margin: 5px;">					<ui:include src="includes/include_cadastro_quiz_pergunta.xhtml" />					<script type="text/javascript">						$(document).ready(function() {							$(document.getElementById("tabview:formPergunta:spDadosPergunta")).height($(window).height() * 0.8 - 120);						});					</script>				</p:scrollPanel>				<p:panel style="margin: 5px;">					<p:commandButton value="Gravar" icon="salvar" action="#{tipoQuizFaces.inserirPergunta}" process="@this, spDadosPergunta" update="spDadosPergunta, :tabview:frmTabCadastro:pgConfiguracoes" oncomplete="handleRequest('dlgPergunta', args)" />					<p:commandButton type="button" value="Fechar" icon="ui-icon-close" onclick="PF('dlgPergunta').hide();" />				</p:panel>			</h:form>		</p:dialog>	</ui:define>	<ui:define name="cadastroFim">		<h:panelGrid style="width: 99%">			<p:fieldset rendered="#{!empty mbeanModel.grupos}" styleClass="#{mbean.percentualTela}">				<h:panelGrid rendered="#{mbeanModel.id != null}">					<h:outputText value="Largura da Tela" />					<p:inputText value="#{mbean.percentualTela}">						<p:ajax process="@this" update="@form" />					</p:inputText>				</h:panelGrid>				<ui:param name="grupos" value="#{mbeanModel.grupos}" />				<ui:param name="paramReadOnly" value="true" />				<ui:param name="mbeanQuiz" value="#{tipoQuizFaces}" />								<ui:include src="../quiz/include_quiz.xhtml" />			</p:fieldset>		</h:panelGrid>	</ui:define>	<ui:define name="pesquisaCampos">		<h:panelGrid style="width: 50%">			<p:outputLabel for="descricaoPesquisa" value="Descrição" />			<p:inputText id="descricaoPesquisa" value="#{mbeanPesquisaModel.descricao}" maxlength="30" styleClass="coluna98" />		</h:panelGrid>		<h:panelGrid columns="2" columnClasses="coluna50, coluna50" style="width: 50%">			<h:outputText value="Tab" />			<h:outputText value="Função" />			<p:selectOneMenu value="#{mbeanPesquisaModel.tabModel.id}" styleClass="coluna90">				<f:selectItem itemValue="" itemLabel="Selecione" />				<f:selectItems value="#{mbean.comboTabs}" />			</p:selectOneMenu>			<p:selectOneMenu value="#{mbeanPesquisaModel.funcaoModel.id}" styleClass="coluna90">				<f:selectItem itemValue="" itemLabel="Selecione" />				<f:selectItems value="#{mbean.comboFuncoes}" />			</p:selectOneMenu>		</h:panelGrid>	</ui:define>	<ui:define name="colunasTabela">		<p:column headerText="Descrição" styleClass="coluna40">			<h:outputText value="#{linha.descricao}" />		</p:column>		<p:column headerText="Tab" styleClass="coluna30">			<h:outputText value="#{linha.tabModel.descricao}" />		</p:column>		<p:column headerText="Função" styleClass="coluna25">			<h:outputText value="#{linha.funcaoModel.descricao}" />		</p:column>	</ui:define></ui:composition>